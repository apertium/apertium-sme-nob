!!! This file removes derivations that are not handled in
!!! bidix/transfer (see
!!! http://wiki.apertium.org/wiki/Northern_S%C3%A1mi_and_Norwegian/Derivations )
!!! and removes tags that are not useful for MT
!!! (eg. prescriptive tags)

!!! Eg. from
!    sámegiela       sápmi+SgGenCmp+Use/Sub+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Gen
!    sámegiela       sápmi+SgGenCmp+Use/Sub+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Gen+Use/NG
!    sámegiela       sápmi+SgGenCmp+Use/Sub+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Acc
!    sámegiela       sápmi+SgGenCmp+PlGenCmp+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Gen
!    sámegiela       sápmi+SgGenCmp+PlGenCmp+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Gen+Use/NG
!    sámegiela       sápmi+SgGenCmp+PlGenCmp+N+SgGenCmp+Use/Circ#+Use/Circgiella+N+Sg+Acc
!    sámegiela       sáme#giella+N+Sg+Gen
!    sámegiela       sáme#giella+N+Sg+Gen+Use/NG
!    sámegiela       sáme#giella+N+Sg+Acc
!!! we get
!    sámegiela       sápmi+SgGenCmp+N+SgGenCmp#giella+N+Sg+Gen
!    sámegiela       sápmi+SgGenCmp+N+SgGenCmp#giella+N+Sg+Acc
!    sámegiela       sápmi+SgGenCmp+PlGenCmp+N+SgGenCmp#giella+N+Sg+Gen
!    sámegiela       sápmi+SgGenCmp+PlGenCmp+N+SgGenCmp#giella+N+Sg+Acc
!    sámegiela       sáme#giella+N+Sg+Gen
!    sámegiela       sáme#giella+N+Sg+Acc
!!! while
!    vuođđogeađggit  vuođđu+N+SgNomCmp+Use/Circ#+Use/Circgeađgi+N+Pl+Nom
!    vuođđogeađggit  vuođđo+Use/Sub+Use/Circ#+Use/Circgeađgi+N+Pl+Nom
!!! turns into
!    vuođđogeađggit  vuođđu+N+SgNomCmp#geađgi+N+Pl+Nom
!    vuođđogeađggit  vuođđo#geađgi+N+Pl+Nom


Alphabet

 %+Allegro:0
 %+Guess:0
 %+Use%/Sub:0
 %+Use%/Marg:0  
 %+Use%/Circ:0  
 %+Use%/CircN:0 
 %+Use%/Ped:0   
 %+Use%/NG:0    
 %+Dial%/%-KJ:0  
 %+Dial%/%-GG:0  
 %+Dial%/%-GS:0  
 %+Dial%/KJ:0   
 %+Dial%/GG:0   
 %+Dial%/GS:0   

 %+First:0 %+Last:0 
 %+None:0 
 %+CmpOnly:0 
 %+SgNomLeft:0 %+SgGenLeft:0 %+PlGenLeft:0 %+SgLeft:0 
 %+AllCmp:0 
 %+DefSgGenCmp:0 %+DefPlGenCmp:0 %+DefCmp:0 

 %+CmpN%/Sg:0 %+CmpN%/SgN:0 %+CmpN%/SgG:0 %+CmpN%/PlG:0
 %+CmpN%/First:0 %+CmpN%/Last:0 %+CmpN%/None:0 %+CmpN%/Only:0
 %+CmpN%/SgLeft:0 %+CmpN%/SgNomLeft:0 %+CmpN%/SgGenLeft:0 %+CmpN%/PlGenLeft:0
 %+CmpN%/All:0 %+CmpN%/Def:0 %+CmpN%/DefSgGen:0 %+CmpN%/DefPlGen:0

!!! Derivation tags copied in from  sme.lex.txt:123..184
! Der#begin
! Derivation position in a derivation row:  Affix and
! 1              2            3             POS type
%+Der1          %+Der2        %+Der3
! Der#1
%+Der%/t                                   ! NN
%+Der%/ár                                  !ACRO>N
%+Der%/Dimin                               ! NN (was: Der/aš & Der/š)
%+Der%/laš                                 ! NA
%+Der%/meahttun                            ! VA
%+Der%/d                                   ! VV
%+Der%/h                                   ! VV - -hit/Causative
%+Der%/huhtti                              ! VV
%+Der%/j                                   ! VV
%+Der%/l                                   ! VV
%+Der%/st                                  ! VV
%+Der%/las                                 ! VA * %+Der1%+Der2 - can only combine with Der3
%+Der%/heapmi                              ! NA * %+Der1%+Der2 - can only combine with Der3
%+Der%/lágan                               ! AA * %+Der1%+Der2 - can only combine with Der3
%+Der%/lágán                               ! AA * %+Der1%+Der2 - can only combine with Der3
%+Der%/halla                               ! VV * %+Der1%+Der2 - can only combine with Der3
%+Der%/huvva                               ! VV * %+Der1%+Der2 - can only combine with Der3
%+Der%/stuvva                              ! VV * %+Der1%+Der2 - can only combine with Der3
! Der#2
              %+Actor
              %+Der%/Dimin                 ! NN
              %+Der%/eapmi                 ! VN
              %+Der%/adda                  ! VV
              %+Der%/ahtti                 ! VV
              %+Der%/alla                  ! VV
              %+Der%/asti                  ! VV
              %+Der%/at                    ! QA ! check this!
              %+Der%/easti                 ! VV
              %+Der%/gielat                ! QA
              %+Der%/jagáš                 ! QA
              %+Der%/lágaš                 ! QA
              %+Der%/lágáš                 ! QA ! - check this!
              %+Der%/lágan                 ! AA ! Check these!
              %+Der%/lágán                 ! AA ! Check these!
              %+Der%/PassL                 ! VV - long passive
! Der#3
                           %+Der%/amoš     ! VN
                           %+Der%/eamoš    ! VN
                           %+Der%/geahtes  ! VA
                           %+Der%/goahti   ! VV
                           %+Der%/muš      ! VN
                           %+Der%/supmi    ! VN
                           %+Der%/n        ! VN
                           %+Der%/vuohta   ! AN
                           %+Der%/upmi     ! VN

! Der#other
! Other/unclassified derivations, can appear in all positions:
%+Der%/veara    ! NA#
%+Der%/viđá     ! NA#
!%+Der%/viđi     ! NA# outcommented, since we have the noun vih0ti, gen:viđi

%+Der%/PassS    ! VV - short passive


! See lexicons NAMAT and SAS for these:
%+Der%/agat
%+Der%/bealat
%+Der%/bealjat
%+Der%/borat
%+Der%/bánat
%+Der%/dábat
%+Der%/dáfot
%+Der%/dáhtot
%+Der%/dásat
%+Der%/dávddat
%+Der%/dávttat
%+Der%/fárddat
%+Der%/gaccat
%+Der%/garat
%+Der%/gearddat
%+Der%/geažat
%+Der%/gielat
%+Der%/gieđat
%+Der%/gieškkat
%+Der%/gilggat
%+Der%/girjjat
%+Der%/guvllot
%+Der%/heakkat
%+Der%/hájat
%+Der%/hámat
%+Der%/ivnnat
%+Der%/jagat
%+Der%/jearggat
%+Der%/jienat
%+Der%/jierpmat
%+Der%/joccat
%+Der%/juolggat
%+Der%/juvllat
%+Der%/kultuvrrat
%+Der%/asat
%+Der%/lahkat
%+Der%/lahtot
%+Der%/lanjat
%+Der%/leakkat
%+Der%/liikkat
%+Der%/linjjat
%+Der%/lunddot
%+Der%/luottat
%+Der%/láiddat
%+Der%/mearkkat
%+Der%/mielat
%+Der%/mohkat
%+Der%/muđot
%+Der%/máhtat
%+Der%/mállet
%+Der%/namat
%+Der%/nađat
%+Der%/nierat
%+Der%/njunat
%+Der%/njálmmat
%+Der%/nuo0lus
%+Der%/náittot
%+Der%/sorttat
%+Der%/nálat
%+Der%/oaivvat
%+Der%/oasat
%+Der%/áissat
%+Der%/olat
%+Der%/orddat
%+Der%/pláhtat
%+Der%/rattat
%+Der%/ravddat
%+Der%/rávnnjat
%+Der%/seagat
%+Der%/seaibbat
%+Der%/seainnat
%+Der%/siiddot
%+Der%/soajat
%+Der%/sogat
%+Der%/soarttat
%+Der%/stábat
%+Der%/stávval
%+Der%/suorat
%+Der%/suorggat
%+Der%/suorpmat
%+Der%/suttat
%+Der%/sánat
%+Der%/sávnnjat
%+Der%/šlájat
%+Der%/uvssat
%+Der%/uvssot
%+Der%/varat
%+Der%/vigat
%+Der%/vuovttat
%+Der%/vuđot
%+Der%/váillat
%+Der%/váimmot
%+Der%/válddat
%+Der%/váttot
%+Der%/ávjjot
%+Der%/čalmmat
%+Der%/čeavžžat
%+Der%/čiegat
%+Der%/čielggat
%+Der%/čoalat
%+Der%/čoarvvat
%+Der%/čuolmmat
%+Der%/čuvddat
%+Der%/hámat
%+Der%/vahkkosaš
%+Der%/čiegahas
%+Der%/luohkálaš
%+Der%/luohkkálaš
%+Der%/viidosaš
%+Der%/kilosaš
%+Der%/diibmosaš
%+Der%/dássásaš
%+Der%/mánnosaš
%+Der%/buddásaš
%+Der%/geardásaš
%+Der%/áigásaš
%+Der%/ahkásaš
%+Der%/jahkásaš
%+Der%/beaivásaš
%+Der%/vahkosaš
%+Der%/mannosaš
%+Der%/siessat

! Der#end



 !! Parts of Speech
 %+N %+A %+Adv %+V
 %+Pron %+CS %+CC %+Adp %+Po %+Pr %+Interj %+Pcle %+Num 
 %+Coll

 %+V:0

 !! Transitivity 
 %+TV %+IV 

;				! end of alphabet



Sets

Useless =	    ! Keep consistent with tags in  sme-lex.txt:36..62
 %+Use%/Sub   
 %+Use%/Marg  
 %+Use%/Circ  
 %+Use%/CircN 
 %+Use%/Ped   
 %+Use%/NG    
 %+Dial%/%-KJ  
 %+Dial%/%-GG  
 %+Dial%/%-GS  
 %+Dial%/KJ   
 %+Dial%/GG   
 %+Dial%/GS   
 %+Guess
 %+Allegro
 
 %+First %+Last 
 %+None 
 %+CmpOnly 
 %+SgNomLeft %+SgGenLeft %+PlGenLeft %+SgLeft 
 %+AllCmp 
 %+DefSgGenCmp %+DefPlGenCmp %+DefCmp 

 %+CmpN%/Sg %+CmpN%/SgN %+CmpN%/SgG %+CmpN%/PlG
 %+CmpN%/First %+CmpN%/Last %+CmpN%/None %+CmpN%/Only
 %+CmpN%/SgLeft %+CmpN%/SgNomLeft %+CmpN%/SgGenLeft %+CmpN%/PlGenLeft
 %+CmpN%/All %+CmpN%/Def %+CmpN%/DefSgGen %+CmpN%/DefPlGen
;


UnhandledDerivation =
 %+Der%/adda
 %+Der%/amoš
 %+Der%/asti
 %+Der%/eamoš
 %+Der%/easti
 %+Der%/geahtes
 %+Der%/heapmi
 %+Der%/huhtti
 %+Der%/huvva
 %+Der%/l
 %+Der%/laš
 %+Der%/lágan
 %+Der%/meahttun
 %+Der%/stuvva
 %+Der%/supmi
 %+Der%/upmi
 %+Der%/viđá
! From lexicons NAMAT and SAS:
 %+Der%/agat
 %+Der%/bealat
 %+Der%/bealjat
 %+Der%/borat
 %+Der%/bánat
 %+Der%/dábat
 %+Der%/dáfot
 %+Der%/dáhtot
 %+Der%/dásat
 %+Der%/dávddat
 %+Der%/dávttat
 %+Der%/fárddat
 %+Der%/gaccat
 %+Der%/garat
 %+Der%/gearddat
 %+Der%/geažat
 %+Der%/gielat
 %+Der%/gieđat
 %+Der%/gieškkat
 %+Der%/gilggat
 %+Der%/girjjat
 %+Der%/guvllot
 %+Der%/heakkat
 %+Der%/hájat
 %+Der%/hámat
 %+Der%/ivnnat
 %+Der%/jagat
 %+Der%/jearggat
 %+Der%/jienat
 %+Der%/jierpmat
 %+Der%/joccat
 %+Der%/juolggat
 %+Der%/juvllat
 %+Der%/kultuvrrat
 %+Der%/asat
 %+Der%/lahkat
 %+Der%/lahtot
 %+Der%/lanjat
 %+Der%/leakkat
 %+Der%/liikkat
 %+Der%/linjjat
 %+Der%/lunddot
 %+Der%/luottat
 %+Der%/láiddat
 %+Der%/mearkkat
 %+Der%/mielat
 %+Der%/mohkat
 %+Der%/muđot
 %+Der%/máhtat
 %+Der%/mállet
 %+Der%/namat
 %+Der%/nađat
 %+Der%/nierat
 %+Der%/njunat
 %+Der%/njálmmat
 %+Der%/nuo0lus
 %+Der%/náittot
 %+Der%/sorttat
 %+Der%/nálat
 %+Der%/oaivvat
 %+Der%/oasat
 %+Der%/áissat
 %+Der%/olat
 %+Der%/orddat
 %+Der%/pláhtat
 %+Der%/rattat
 %+Der%/ravddat
 %+Der%/rávnnjat
 %+Der%/seagat
 %+Der%/seaibbat
 %+Der%/seainnat
 %+Der%/siiddot
 %+Der%/soajat
 %+Der%/sogat
 %+Der%/soarttat
 %+Der%/stábat
 %+Der%/stávval
 %+Der%/suorat
 %+Der%/suorggat
 %+Der%/suorpmat
 %+Der%/suttat
 %+Der%/sánat
 %+Der%/sávnnjat
 %+Der%/šlájat
 %+Der%/uvssat
 %+Der%/uvssot
 %+Der%/varat
 %+Der%/vigat
 %+Der%/vuovttat
 %+Der%/vuđot
 %+Der%/váillat
 %+Der%/váimmot
 %+Der%/válddat
 %+Der%/váttot
 %+Der%/ávjjot
 %+Der%/čalmmat
 %+Der%/čeavžžat
 %+Der%/čiegat
 %+Der%/čielggat
 %+Der%/čoalat
 %+Der%/čoarvvat
 %+Der%/čuolmmat
 %+Der%/čuvddat
 %+Der%/hámat
 %+Der%/vahkkosaš
 %+Der%/čiegahas
 %+Der%/luohkálaš
 %+Der%/luohkkálaš
 %+Der%/viidosaš
 %+Der%/kilosaš
 %+Der%/diibmosaš
 %+Der%/dássásaš
 %+Der%/mánnosaš
 %+Der%/buddásaš
 %+Der%/geardásaš
 %+Der%/áigásaš
 %+Der%/ahkásaš
 %+Der%/jahkásaš
 %+Der%/beaivásaš
 %+Der%/vahkosaš
 %+Der%/mannosaš
 %+Der%/siessat
 %+Der%/veara
;


PartOfSpeech =
 %+N %+A %+Adv %+V
 %+Pron %+CS %+CC %+Adp %+Po %+Pr %+Interj %+Pcle %+Num 
 %+Coll
;

Transitivity =
 %+TV %+IV 
;


Derivation =	 ! Keep consistent with tags in  sme-lex.txt:123..184
 ! Der#begin
 ! Derivation position in a derivation row:  Affix and
 ! 1              2            3             POS type
 %+Der1          %+Der2        %+Der3
 ! Der#1
 %+Der%/t                                   ! NN
 %+Der%/ár                                  !ACRO>N
 %+Der%/Dimin                               ! NN (was: Der/aš & Der/š)
 %+Der%/laš                                 ! NA
 %+Der%/meahttun                            ! VA
 %+Der%/d                                   ! VV
 %+Der%/h                                   ! VV - -hit/Causative
 %+Der%/huhtti                              ! VV
 %+Der%/j                                   ! VV
 %+Der%/l                                   ! VV
 %+Der%/st                                  ! VV
 %+Der%/las                                 ! VA * %+Der1%+Der2 - can only combine with Der3
 %+Der%/heapmi                              ! NA * %+Der1%+Der2 - can only combine with Der3
 %+Der%/lágan                               ! AA * %+Der1%+Der2 - can only combine with Der3
 %+Der%/lágán                               ! AA * %+Der1%+Der2 - can only combine with Der3
 %+Der%/halla                               ! VV * %+Der1%+Der2 - can only combine with Der3
 %+Der%/huvva                               ! VV * %+Der1%+Der2 - can only combine with Der3
 %+Der%/stuvva                              ! VV * %+Der1%+Der2 - can only combine with Der3
 ! Der#2
               %+Actor
               %+Der%/Dimin                 ! NN
               %+Der%/eapmi                 ! VN
               %+Der%/adda                  ! VV
               %+Der%/ahtti                 ! VV
               %+Der%/alla                  ! VV
               %+Der%/asti                  ! VV
               %+Der%/at                    ! QA ! check this!
               %+Der%/easti                 ! VV
               %+Der%/gielat                ! QA
               %+Der%/jagáš                 ! QA
               %+Der%/lágaš                 ! QA
               %+Der%/lágáš                 ! QA ! - check this!
               %+Der%/lágan                 ! AA ! Check these!
               %+Der%/lágán                 ! AA ! Check these!
               %+Der%/PassL                 ! VV - long passive
 ! Der#3
                            %+Der%/amoš     ! VN
                            %+Der%/eamoš    ! VN
                            %+Der%/geahtes  ! VA
                            %+Der%/goahti   ! VV
                            %+Der%/muš      ! VN
                            %+Der%/supmi    ! VN
                            %+Der%/n        ! VN
                            %+Der%/vuohta   ! AN
                            %+Der%/upmi     ! VN
 
 ! Der#other
 ! Other/unclassified derivations, can appear in all positions:
 %+Der%/veara    ! NA#
 %+Der%/viđá     ! NA#
 !%+Der%/viđi     ! NA# outcommented, since we have the noun vih0ti, gen:viđi
 
 %+Der%/PassS    ! VV - short passive
;




Rules 



"Delete Use-tags etc. that we don't use"
Vu:0 <=> _ ; where Vu in Useless;
!! Removing tags with hfst-substitute will give duplicate analyses, so
!! we do it here instead.



"Only allow those derivations that survive bidix/transfer"
Vu /<= _ ; where Vu in UnhandledDerivation;
!! Fail if analysis contains derivations that are not handled in
!! bidix/transfer.

"No derivations of derivations"
Vd /<= Derivation+ PartOfSpeech+ [ %+TV | %+IV | [] ] _ ; where Vd in Derivation;
!! Although Der/foo and Der/bar might be handled by bidix/transfer,
!! Der/foo N Der/bar isn't necessarily.


"No consecutive V tags (giellatekno bug?)"
%+V /<= %+V _ ;


!! We create exceptions to the above rule by simply removing the inner
!! PartOfSpeech tag in those contexts where the double derivation has
!! bidix entries:
"Allow +V+Der2+Der/PassL+V+Der3+Der/n+N (removing inner PoS tag)"
%+V:0 <=> %+V Transitivity %+Der2 %+Der%/PassL _ %+Der3 %+Der%/n %+N ;

"Allow +V+Der1+Der/j+V+Der2+Der/PassL+V (removing inner PoS tag)"
%+V:0 <=> %+V Transitivity %+Der1 %+Der%/j _ %+Der2 %+Der%/PassL %+V ;

